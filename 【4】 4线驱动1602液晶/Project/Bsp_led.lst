C51 COMPILER V9.01   BSP_LED                                                               04/20/2022 15:09:00 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE BSP_LED
OBJECT MODULE PLACED IN ..\Obj\Bsp_led.obj
COMPILER INVOKED BY: E:\KEILC51\C51\BIN\C51.EXE ..\User\led\Bsp_led.c OPTIMIZE(1,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(
                    -.\Bsp_led.lst) OBJECT(..\Obj\Bsp_led.obj)

line level    source

   1          #include "Bsp_led.h"
   2          
   3          static int LED_CTL(int which, int status);
   4          
   5          /* C99支持乱序赋值结构体
   6          struct led_operations LED{
   7                  .num = LED_NUM;
   8                  .led_ctl = LED_CTL;     
   9          };
  10          */
  11          
  12          //初始化LED外设结构体
  13          struct led_operations LED_fops = {LED_NUM , LED_CTL};
  14          
  15          /**
  16           * @brief  LED_CTL LED控制
  17           * @param  which 1-4  D1 D2 D3 D4        status 1-亮 0-灭
  18           * @retval 0 设置成功1 设置失败
  19           */
  20          static int LED_CTL(int which, int status)
  21          {
  22   1              switch(which)
  23   1              {
  24   2                      case 1: LED1 = !status;break;
  25   2                      case 2: LED2 = !status;break;
  26   2                      case 3: LED3 = !status;break;
  27   2                      case 4: LED4 = !status;break;
  28   2                      default: return -1;break;
  29   2              }
  30   1              return 0;
  31   1      }
  32          
  33          /**
  34           * @brief  LED_Init LED初始化
  35           * @param  无
  36           * @retval 无
  37           */
  38          void LED_Init(void)
  39          {
  40   1              P2M0|=0xF0;                             //P2M0.0-3=0
  41   1              P2M1&=0xF0;                             //P2M1.0-3=0
  42   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     98    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
